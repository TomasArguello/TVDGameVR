using System;
using System.Linq;
using System.Collections.Generic;
using UnityEngine;

namespace Tamu.Tvd.VR {
    // ================================================================================================
    // ||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
    // ================================================================================================
    /**
     * This class does things...
     */
    // ================================================================================================
    // ||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
    // ================================================================================================
    public class PlayerController : MonoBehaviour {
        // ==================================================================================
        // Fields & Properties
        // ==================================================================================
        public Transform TrackingSpace;
        public float speed = 0.01f;

        private Vector3 _originalPos;
        public OVRInput.Button ResetButton = OVRInput.Button.One;
        // ==================================================================================
        // MonoBehaviour
        // ==================================================================================
        // ------------------------------------------------------------------------
        void Awake() {
            _originalPos = transform.position;
        }
        // ------------------------------------------------------------------------
        void Start() {

        }
        // ------------------------------------------------------------------------
        void Update() {
            Vector2 movementR = OVRInput.Get(OVRInput.Axis2D.PrimaryThumbstick, OVRInput.Controller.RTouch);
            Vector2 movementL = OVRInput.Get(OVRInput.Axis2D.PrimaryThumbstick, OVRInput.Controller.LTouch);

            TrackingSpace.position += new Vector3(movementL.x,           0, movementL.y) * speed;
            TrackingSpace.position += new Vector3(          0, movementR.y,           0) * speed;

            if (TrackingSpace.position.y < 0.01f)
                TrackingSpace.position = Vector3.Scale(TrackingSpace.position, new Vector3(1, 0, 1)) + new Vector3(0, 0.01f, 0);

            if (OVRInput.GetDown(ResetButton))
                TrackingSpace.position = _originalPos;
        }
        // ------------------------------------------------------------------------
        // ==================================================================================
        // Methods
        // ==================================================================================

        // ==================================================================================
    }
    // ================================================================================================
    // ||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||
    // ================================================================================================
}